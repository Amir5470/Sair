{"version":3,"file":"browser-action.js","mappings":"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","sources":["webpack://electron-chrome-extensions/external node-commonjs \"electron\"","webpack://electron-chrome-extensions/external node-commonjs \"events\"","webpack://electron-chrome-extensions/webpack/bootstrap","webpack://electron-chrome-extensions/webpack/runtime/compat get default export","webpack://electron-chrome-extensions/webpack/runtime/define property getters","webpack://electron-chrome-extensions/webpack/runtime/hasOwnProperty shorthand","webpack://electron-chrome-extensions/webpack/runtime/make namespace object","webpack://electron-chrome-extensions/./src/browser-action.ts"],"sourcesContent":["module.exports = require(\"electron\");","module.exports = require(\"events\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { ipcRenderer, contextBridge, webFrame } from 'electron'\nimport { EventEmitter } from 'events'\n\nexport const injectBrowserAction = () => {\n  const actionMap = new Map<string, any>()\n  const internalEmitter = new EventEmitter()\n  const observerCounts = new Map<string, number>()\n\n  const invoke = <T>(name: string, partition: string, ...args: any[]): Promise<T> => {\n    return ipcRenderer.invoke('crx-msg-remote', partition, name, ...args)\n  }\n\n  interface ActivateDetails {\n    eventType: string\n    extensionId: string\n    tabId: number\n    anchorRect: { x: number; y: number; width: number; height: number }\n  }\n\n  const browserAction = {\n    addEventListener(name: string, listener: (...args: any[]) => void) {\n      internalEmitter.addListener(name, listener)\n    },\n    removeEventListener(name: string, listener: (...args: any[]) => void) {\n      internalEmitter.removeListener(name, listener)\n    },\n\n    getAction(extensionId: string) {\n      return actionMap.get(extensionId)\n    },\n    async getState(partition: string): Promise<{ activeTabId?: number; actions: any[] }> {\n      const state = await invoke<any>('browserAction.getState', partition)\n      for (const action of state.actions) {\n        actionMap.set(action.id, action)\n      }\n      queueMicrotask(() => internalEmitter.emit('update', state))\n      return state\n    },\n\n    activate: (partition: string, details: ActivateDetails) => {\n      return invoke('browserAction.activate', partition, details)\n    },\n\n    addObserver(partition: string) {\n      let count = observerCounts.has(partition) ? observerCounts.get(partition)! : 0\n      count = count + 1\n      observerCounts.set(partition, count)\n\n      if (count === 1) {\n        invoke('browserAction.addObserver', partition)\n      }\n    },\n    removeObserver(partition: string) {\n      let count = observerCounts.has(partition) ? observerCounts.get(partition)! : 0\n      count = Math.max(count - 1, 0)\n      observerCounts.set(partition, count)\n\n      if (count === 0) {\n        invoke('browserAction.removeObserver', partition)\n      }\n    },\n  }\n\n  ipcRenderer.on('browserAction.update', () => {\n    for (const partition of observerCounts.keys()) {\n      browserAction.getState(partition)\n    }\n  })\n\n  // Function body to run in the main world.\n  // IMPORTANT: This must be self-contained, no closure variables can be used!\n  function mainWorldScript() {\n    const DEFAULT_PARTITION = '_self'\n\n    class BrowserActionElement extends HTMLButtonElement {\n      private updateId?: number\n      private badge?: HTMLDivElement\n      private pendingIcon?: HTMLImageElement\n\n      get id(): string {\n        return this.getAttribute('id') || ''\n      }\n\n      set id(id: string) {\n        this.setAttribute('id', id)\n      }\n\n      get tab(): number {\n        const tabId = parseInt(this.getAttribute('tab') || '', 10)\n        return typeof tabId === 'number' && !isNaN(tabId) ? tabId : -1\n      }\n\n      set tab(tab: number) {\n        this.setAttribute('tab', `${tab}`)\n      }\n\n      get partition(): string | null {\n        return this.getAttribute('partition')\n      }\n\n      set partition(partition: string | null) {\n        if (partition) {\n          this.setAttribute('partition', partition)\n        } else {\n          this.removeAttribute('partition')\n        }\n      }\n\n      static get observedAttributes() {\n        return ['id', 'tab', 'partition']\n      }\n\n      constructor() {\n        super()\n\n        // TODO: event delegation\n        this.addEventListener('click', this.onClick.bind(this))\n        this.addEventListener('contextmenu', this.onContextMenu.bind(this))\n      }\n\n      connectedCallback() {\n        if (this.isConnected) {\n          this.update()\n        }\n      }\n\n      disconnectedCallback() {\n        if (this.updateId) {\n          cancelAnimationFrame(this.updateId)\n          this.updateId = undefined\n        }\n        if (this.pendingIcon) {\n          this.pendingIcon = undefined\n        }\n      }\n\n      attributeChangedCallback() {\n        if (this.isConnected) {\n          this.update()\n        }\n      }\n\n      private activate(event: Event) {\n        const rect = this.getBoundingClientRect()\n\n        browserAction.activate(this.partition || DEFAULT_PARTITION, {\n          eventType: event.type,\n          extensionId: this.id,\n          tabId: this.tab,\n          anchorRect: {\n            x: rect.left,\n            y: rect.top,\n            width: rect.width,\n            height: rect.height,\n          },\n        })\n      }\n\n      private onClick(event: MouseEvent) {\n        this.activate(event)\n      }\n\n      private onContextMenu(event: MouseEvent) {\n        event.stopImmediatePropagation()\n        event.preventDefault()\n\n        this.activate(event)\n      }\n\n      private getBadge() {\n        let badge = this.badge\n        if (!badge) {\n          this.badge = badge = document.createElement('div')\n          badge.className = 'badge'\n          ;(badge as any).part = 'badge'\n          this.appendChild(badge)\n        }\n        return badge\n      }\n\n      private update() {\n        if (this.updateId) return\n        this.updateId = requestAnimationFrame(this.updateCallback.bind(this))\n      }\n\n      private updateIcon(info: any) {\n        const iconSize = 32\n        const resizeType = 2\n        const timeParam = info.iconModified ? `&t=${info.iconModified}` : ''\n        const iconUrl = `crx://extension-icon/${this.id}/${iconSize}/${resizeType}?tabId=${this.tab}${timeParam}`\n        const bgImage = `url(${iconUrl})`\n\n        if (this.pendingIcon) {\n          this.pendingIcon = undefined\n        }\n\n        // Preload icon to prevent it from blinking\n        const img = (this.pendingIcon = new Image())\n        img.onload = () => {\n          if (this.isConnected) {\n            this.style.backgroundImage = bgImage\n            this.pendingIcon = undefined\n          }\n        }\n        img.src = iconUrl\n      }\n\n      private updateCallback() {\n        this.updateId = undefined\n\n        const action = browserAction.getAction(this.id)\n\n        const activeTabId = this.tab\n        const tabInfo = activeTabId > -1 ? action.tabs[activeTabId] : {}\n        const info = { ...tabInfo, ...action }\n\n        this.title = typeof info.title === 'string' ? info.title : ''\n\n        this.updateIcon(info)\n\n        if (info.text) {\n          const badge = this.getBadge()\n          badge.textContent = info.text\n          badge.style.color = '#fff' // TODO: determine bg lightness?\n          badge.style.backgroundColor = info.color\n        } else if (this.badge) {\n          this.badge.remove()\n          this.badge = undefined\n        }\n      }\n    }\n\n    customElements.define('browser-action', BrowserActionElement, { extends: 'button' })\n\n    class BrowserActionListElement extends HTMLElement {\n      private observing: boolean = false\n\n      get tab(): number | null {\n        const tabId = parseInt(this.getAttribute('tab') || '', 10)\n        return typeof tabId === 'number' && !isNaN(tabId) ? tabId : null\n      }\n\n      set tab(tab: number | null) {\n        if (typeof tab === 'number') {\n          this.setAttribute('tab', `${tab}`)\n        } else {\n          this.removeAttribute('tab')\n        }\n      }\n\n      get partition(): string | null {\n        return this.getAttribute('partition')\n      }\n\n      set partition(partition: string | null) {\n        if (partition) {\n          this.setAttribute('partition', partition)\n        } else {\n          this.removeAttribute('partition')\n        }\n      }\n\n      static get observedAttributes() {\n        return ['tab', 'partition']\n      }\n\n      constructor() {\n        super()\n\n        const shadowRoot = this.attachShadow({ mode: 'open' })\n\n        const style = document.createElement('style')\n        style.textContent = `\n:host {\n  display: flex;\n  flex-direction: row;\n  gap: 5px;\n}\n\n.action {\n  width: 28px;\n  height: 28px;\n  background-color: transparent;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 70%;\n  border: none;\n  border-radius: 4px;\n  padding: 0;\n  position: relative;\n  outline: none;\n}\n\n.action:hover {\n  background-color: var(--browser-action-hover-bg, rgba(255, 255, 255, 0.3));\n}\n\n.badge {\n  box-shadow: 0px 0px 1px 1px var(--browser-action-badge-outline, #444);\n  box-sizing: border-box;\n  max-width: 100%;\n  height: 12px;\n  padding: 0 2px;\n  border-radius: 2px;\n  position: absolute;\n  bottom: 1px;\n  right: 0;\n  pointer-events: none;\n  line-height: 1.5;\n  font-size: 9px;\n  font-weight: 400;\n  overflow: hidden;\n  white-space: nowrap;\n}`\n        shadowRoot.appendChild(style)\n      }\n\n      connectedCallback() {\n        if (this.isConnected) {\n          this.startObserving()\n          this.fetchState()\n        }\n      }\n\n      disconnectedCallback() {\n        this.stopObserving()\n      }\n\n      attributeChangedCallback(name: string, oldValue: any, newValue: any) {\n        if (oldValue === newValue) return\n\n        if (this.isConnected) {\n          this.fetchState()\n        }\n      }\n\n      private startObserving() {\n        if (this.observing) return\n        browserAction.addEventListener('update', this.update)\n        browserAction.addObserver(this.partition || DEFAULT_PARTITION)\n        this.observing = true\n      }\n\n      private stopObserving() {\n        if (!this.observing) return\n        browserAction.removeEventListener('update', this.update)\n        browserAction.removeObserver(this.partition || DEFAULT_PARTITION)\n        this.observing = false\n      }\n\n      private fetchState = async () => {\n        try {\n          await browserAction.getState(this.partition || DEFAULT_PARTITION)\n        } catch {\n          console.error(\n            `browser-action-list failed to update [tab: ${this.tab}, partition: '${this.partition}']`\n          )\n        }\n      }\n\n      private update = (state: any) => {\n        const tabId =\n          typeof this.tab === 'number' && this.tab >= 0 ? this.tab : state.activeTabId || -1\n\n        // Create or update action buttons\n        for (const action of state.actions) {\n          let browserActionNode = this.shadowRoot?.querySelector(\n            `[id=${action.id}]`\n          ) as BrowserActionElement\n\n          if (!browserActionNode) {\n            const node = document.createElement('button', {\n              is: 'browser-action',\n            }) as BrowserActionElement\n            node.id = action.id\n            node.className = 'action'\n            ;(node as any).part = 'action'\n            browserActionNode = node\n            this.shadowRoot?.appendChild(browserActionNode)\n          }\n\n          if (this.partition) browserActionNode.partition = this.partition\n          browserActionNode.tab = tabId\n        }\n\n        // Remove any actions no longer in use\n        const actionNodes = Array.from(\n          this.shadowRoot?.querySelectorAll('.action') as any\n        ) as BrowserActionElement[]\n        for (const actionNode of actionNodes) {\n          if (!state.actions.some((action: any) => action.id === actionNode.id)) {\n            actionNode.remove()\n          }\n        }\n      }\n    }\n\n    customElements.define('browser-action-list', BrowserActionListElement)\n  }\n\n  try {\n    contextBridge.exposeInMainWorld('browserAction', browserAction)\n\n    // Must execute script in main world to modify custom component registry.\n    webFrame.executeJavaScript(`(${mainWorldScript}());`)\n  } catch {\n    // When contextIsolation is disabled, contextBridge will throw an error.\n    // If that's the case, we're in the main world so we can just execute our\n    // function.\n    mainWorldScript()\n  }\n}\n"],"names":["ipcRenderer","contextBridge","webFrame","EventEmitter","injectBrowserAction","actionMap","Map","internalEmitter","observerCounts","invoke","name","partition","args","browserAction","addEventListener","listener","addListener","removeEventListener","removeListener","getAction","extensionId","get","getState","state","action","actions","set","id","queueMicrotask","emit","activate","details","addObserver","count","has","removeObserver","Math","max","on","keys","mainWorldScript","DEFAULT_PARTITION","BrowserActionElement","HTMLButtonElement","getAttribute","setAttribute","tab","tabId","parseInt","isNaN","removeAttribute","observedAttributes","constructor","updateId","badge","pendingIcon","onClick","bind","onContextMenu","connectedCallback","isConnected","update","disconnectedCallback","cancelAnimationFrame","undefined","attributeChangedCallback","event","rect","getBoundingClientRect","eventType","type","anchorRect","x","left","y","top","width","height","stopImmediatePropagation","preventDefault","getBadge","document","createElement","className","part","appendChild","requestAnimationFrame","updateCallback","updateIcon","info","iconSize","resizeType","timeParam","iconModified","iconUrl","bgImage","img","Image","onload","style","backgroundImage","src","activeTabId","tabInfo","tabs","title","text","textContent","color","backgroundColor","remove","customElements","define","extends","BrowserActionListElement","HTMLElement","observing","fetchState","console","error","browserActionNode","shadowRoot","querySelector","node","is","actionNodes","Array","from","querySelectorAll","actionNode","some","attachShadow","mode","startObserving","stopObserving","oldValue","newValue","exposeInMainWorld","executeJavaScript"],"sourceRoot":""}