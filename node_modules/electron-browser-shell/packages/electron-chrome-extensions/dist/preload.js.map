{"version":3,"file":"preload.js","mappings":"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","sources":["webpack://electron-chrome-extensions/./src/renderer/event.ts","webpack://electron-chrome-extensions/./src/renderer/index.ts","webpack://electron-chrome-extensions/external node-commonjs \"electron\"","webpack://electron-chrome-extensions/webpack/bootstrap","webpack://electron-chrome-extensions/webpack/runtime/compat get default export","webpack://electron-chrome-extensions/webpack/runtime/define property getters","webpack://electron-chrome-extensions/webpack/runtime/hasOwnProperty shorthand","webpack://electron-chrome-extensions/webpack/runtime/make namespace object","webpack://electron-chrome-extensions/./src/preload.ts"],"sourcesContent":["import { ipcRenderer } from 'electron'\n\nconst formatIpcName = (name: string) => `crx-${name}`\n\nconst listenerMap = new Map<string, number>()\n\nexport const addExtensionListener = (extensionId: string, name: string, callback: Function) => {\n  const listenerCount = listenerMap.get(name) || 0\n\n  if (listenerCount === 0) {\n    // TODO: should these IPCs be batched in a microtask?\n    ipcRenderer.send('crx-add-listener', extensionId, name)\n  }\n\n  listenerMap.set(name, listenerCount + 1)\n\n  ipcRenderer.addListener(formatIpcName(name), function (event, ...args) {\n    if (process.env.NODE_ENV === 'development') {\n      console.log(name, '(result)', ...args)\n    }\n    callback(...args)\n  })\n}\n\nexport const removeExtensionListener = (extensionId: string, name: string, callback: any) => {\n  if (listenerMap.has(name)) {\n    const listenerCount = listenerMap.get(name) || 0\n\n    if (listenerCount <= 1) {\n      listenerMap.delete(name)\n\n      ipcRenderer.send('crx-remove-listener', extensionId, name)\n    } else {\n      listenerMap.set(name, listenerCount - 1)\n    }\n  }\n\n  ipcRenderer.removeListener(formatIpcName(name), callback)\n}\n","import { ipcRenderer, contextBridge, webFrame } from 'electron'\nimport { addExtensionListener, removeExtensionListener } from './event'\n\nexport const injectExtensionAPIs = () => {\n  interface ExtensionMessageOptions {\n    noop?: boolean\n    serialize?: (...args: any[]) => any[]\n  }\n\n  const invokeExtension = async function (\n    extensionId: string,\n    fnName: string,\n    options: ExtensionMessageOptions = {},\n    ...args: any[]\n  ) {\n    const callback = typeof args[args.length - 1] === 'function' ? args.pop() : undefined\n\n    if (process.env.NODE_ENV === 'development') {\n      console.log(fnName, args)\n    }\n\n    if (options.noop) {\n      console.warn(`${fnName} is not yet implemented.`)\n      if (callback) callback()\n      return\n    }\n\n    if (options.serialize) {\n      args = options.serialize(...args)\n    }\n\n    let result\n\n    try {\n      result = await ipcRenderer.invoke('crx-msg', extensionId, fnName, ...args)\n    } catch (e) {\n      // TODO: Set chrome.runtime.lastError?\n      console.error(e)\n      result = undefined\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      console.log(fnName, '(result)', result)\n    }\n\n    if (callback) {\n      callback(result)\n    } else {\n      return result\n    }\n  }\n\n  const electronContext = {\n    invokeExtension,\n    addExtensionListener,\n    removeExtensionListener,\n  }\n\n  // Function body to run in the main world.\n  // IMPORTANT: This must be self-contained, no closure variable will be included!\n  function mainWorldScript() {\n    // Use context bridge API or closure variable when context isolation is disabled.\n    const electron = ((window as any).electron as typeof electronContext) || electronContext\n\n    const chrome = window.chrome || {}\n    const extensionId = chrome.runtime?.id\n\n    // NOTE: This uses a synchronous IPC to get the extension manifest.\n    // To avoid this, JS bindings for RendererExtensionRegistry would be\n    // required.\n    const manifest: chrome.runtime.Manifest =\n      (extensionId && chrome.runtime.getManifest()) || ({} as any)\n\n    const invokeExtension =\n      (fnName: string, opts: ExtensionMessageOptions = {}) =>\n      (...args: any[]) =>\n        electron.invokeExtension(extensionId, fnName, opts, ...args)\n\n    function imageData2base64(imageData: ImageData) {\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')\n      if (!ctx) return null\n\n      canvas.width = imageData.width\n      canvas.height = imageData.height\n      ctx.putImageData(imageData, 0, 0)\n\n      return canvas.toDataURL()\n    }\n\n    class ExtensionEvent<T extends Function> implements chrome.events.Event<T> {\n      constructor(private name: string) {}\n\n      addListener(callback: T) {\n        electron.addExtensionListener(extensionId, this.name, callback)\n      }\n      removeListener(callback: T) {\n        electron.removeExtensionListener(extensionId, this.name, callback)\n      }\n\n      getRules(callback: (rules: chrome.events.Rule[]) => void): void\n      getRules(ruleIdentifiers: string[], callback: (rules: chrome.events.Rule[]) => void): void\n      getRules(ruleIdentifiers: any, callback?: any) {\n        throw new Error('Method not implemented.')\n      }\n      hasListener(callback: T): boolean {\n        throw new Error('Method not implemented.')\n      }\n      removeRules(ruleIdentifiers?: string[] | undefined, callback?: (() => void) | undefined): void\n      removeRules(callback?: (() => void) | undefined): void\n      removeRules(ruleIdentifiers?: any, callback?: any) {\n        throw new Error('Method not implemented.')\n      }\n      addRules(\n        rules: chrome.events.Rule[],\n        callback?: ((rules: chrome.events.Rule[]) => void) | undefined\n      ): void {\n        throw new Error('Method not implemented.')\n      }\n      hasListeners(): boolean {\n        throw new Error('Method not implemented.')\n      }\n    }\n\n    class ChromeSetting implements Partial<chrome.types.ChromeSetting> {\n      set() {}\n      get() {}\n      clear() {}\n      // onChange: chrome.types.ChromeSettingChangedEvent\n    }\n\n    type DeepPartial<T> = {\n      [P in keyof T]?: DeepPartial<T[P]>\n    }\n\n    type APIFactoryMap = {\n      [apiName in keyof typeof chrome]: {\n        shouldInject?: () => boolean\n        factory: (base: DeepPartial<typeof chrome[apiName]>) => DeepPartial<typeof chrome[apiName]>\n      }\n    }\n\n    /**\n     * Factories for each additional chrome.* API.\n     */\n    const apiDefinitions: Partial<APIFactoryMap> = {\n      browserAction: {\n        shouldInject: () => !!(manifest.action || manifest.browser_action),\n        factory: (base) => {\n          const api = {\n            ...base,\n\n            setTitle: invokeExtension('browserAction.setTitle'),\n            getTitle: invokeExtension('browserAction.getTitle'),\n\n            setIcon: invokeExtension('browserAction.setIcon', {\n              serialize: (details: any) => {\n                if (details.imageData) {\n                  if (details.imageData instanceof ImageData) {\n                    details.imageData = imageData2base64(details.imageData)\n                  } else {\n                    details.imageData = Object.entries(details.imageData).reduce(\n                      (obj: any, pair: any[]) => {\n                        obj[pair[0]] = imageData2base64(pair[1])\n                        return obj\n                      },\n                      {}\n                    )\n                  }\n                }\n\n                return [details]\n              },\n            }),\n\n            setPopup: invokeExtension('browserAction.setPopup'),\n            getPopup: invokeExtension('browserAction.getPopup'),\n\n            setBadgeText: invokeExtension('browserAction.setBadgeText'),\n            getBadgeText: invokeExtension('browserAction.getBadgeText'),\n\n            setBadgeBackgroundColor: invokeExtension('browserAction.setBadgeBackgroundColor'),\n            getBadgeBackgroundColor: invokeExtension('browserAction.getBadgeBackgroundColor'),\n\n            enable: invokeExtension('browserAction.enable', { noop: true }),\n            disable: invokeExtension('browserAction.disable', { noop: true }),\n\n            onClicked: new ExtensionEvent('browserAction.onClicked'),\n          }\n\n          return api\n        },\n      },\n\n      commands: {\n        factory: (base) => {\n          return {\n            ...base,\n            getAll: invokeExtension('commands.getAll'),\n            onCommand: new ExtensionEvent('commands.onCommand'),\n          }\n        },\n      },\n\n      contextMenus: {\n        factory: (base) => {\n          let menuCounter = 0\n          const menuCallbacks: {\n            [key: string]: chrome.contextMenus.CreateProperties['onclick']\n          } = {}\n          const menuCreate = invokeExtension('contextMenus.create')\n\n          let hasInternalListener = false\n          const addInternalListener = () => {\n            api.onClicked.addListener((info, tab) => {\n              const callback = menuCallbacks[info.menuItemId]\n              if (callback && tab) callback(info, tab)\n            })\n            hasInternalListener = true\n          }\n\n          const api = {\n            ...base,\n            create: function (\n              createProperties: chrome.contextMenus.CreateProperties,\n              callback?: Function\n            ) {\n              if (typeof createProperties.id === 'undefined') {\n                createProperties.id = `${++menuCounter}`\n              }\n              if (createProperties.onclick) {\n                if (!hasInternalListener) addInternalListener()\n                menuCallbacks[createProperties.id] = createProperties.onclick\n                delete createProperties.onclick\n              }\n              menuCreate(createProperties, callback)\n              return createProperties.id\n            },\n            update: invokeExtension('contextMenus.update', { noop: true }),\n            remove: invokeExtension('contextMenus.remove'),\n            removeAll: invokeExtension('contextMenus.removeAll'),\n            onClicked: new ExtensionEvent<\n              (info: chrome.contextMenus.OnClickData, tab: chrome.tabs.Tab) => void\n            >('contextMenus.onClicked'),\n          }\n\n          return api\n        },\n      },\n\n      cookies: {\n        factory: (base) => {\n          return {\n            ...base,\n            get: invokeExtension('cookies.get'),\n            getAll: invokeExtension('cookies.getAll'),\n            set: invokeExtension('cookies.set'),\n            remove: invokeExtension('cookies.remove'),\n            getAllCookieStores: invokeExtension('cookies.getAllCookieStores'),\n            onChanged: new ExtensionEvent('cookies.onChanged'),\n          }\n        },\n      },\n\n      extension: {\n        factory: (base) => {\n          return {\n            ...base,\n            isAllowedIncognitoAccess: () => false,\n            // TODO: Add native implementation\n            getViews: () => [],\n          }\n        },\n      },\n\n      notifications: {\n        factory: (base) => {\n          return {\n            ...base,\n            clear: invokeExtension('notifications.clear'),\n            create: invokeExtension('notifications.create'),\n            getAll: invokeExtension('notifications.getAll'),\n            getPermissionLevel: invokeExtension('notifications.getPermissionLevel'),\n            update: invokeExtension('notifications.update'),\n            onClicked: new ExtensionEvent('notifications.onClicked'),\n            onButtonClicked: new ExtensionEvent('notifications.onButtonClicked'),\n            onClosed: new ExtensionEvent('notifications.onClosed'),\n          }\n        },\n      },\n\n      privacy: {\n        factory: (base) => {\n          return {\n            ...base,\n            network: {\n              networkPredictionEnabled: new ChromeSetting(),\n              webRTCIPHandlingPolicy: new ChromeSetting(),\n            },\n            websites: {\n              hyperlinkAuditingEnabled: new ChromeSetting(),\n            },\n          }\n        },\n      },\n\n      runtime: {\n        factory: (base) => {\n          return {\n            ...base,\n            openOptionsPage: invokeExtension('runtime.openOptionsPage'),\n          }\n        },\n      },\n\n      storage: {\n        factory: (base) => {\n          const local = base && base.local\n          return {\n            ...base,\n            // TODO: provide a backend for browsers to opt-in to\n            managed: local,\n            sync: local,\n          }\n        },\n      },\n\n      tabs: {\n        factory: (base) => {\n          const api = {\n            ...base,\n            create: invokeExtension('tabs.create'),\n            executeScript: function (arg1: unknown, arg2: unknown, arg3: unknown) {\n              // Electron's implementation of chrome.tabs.executeScript is in\n              // C++, but it doesn't support implicit execution in the active\n              // tab. To handle this, we need to get the active tab ID and\n              // pass it into the C++ implementation ourselves.\n              if (typeof arg1 === 'object') {\n                api.query(\n                  { active: true, windowId: chrome.windows.WINDOW_ID_CURRENT },\n                  ([activeTab]: chrome.tabs.Tab[]) => {\n                    api.executeScript(activeTab.id, arg1, arg2)\n                  }\n                )\n              } else {\n                ;(base.executeScript as typeof chrome.tabs.executeScript)(\n                  arg1 as number,\n                  arg2 as chrome.tabs.InjectDetails,\n                  arg3 as () => {}\n                )\n              }\n            },\n            get: invokeExtension('tabs.get'),\n            getCurrent: invokeExtension('tabs.getCurrent'),\n            getAllInWindow: invokeExtension('tabs.getAllInWindow'),\n            insertCSS: invokeExtension('tabs.insertCSS'),\n            query: invokeExtension('tabs.query'),\n            reload: invokeExtension('tabs.reload'),\n            update: invokeExtension('tabs.update'),\n            remove: invokeExtension('tabs.remove'),\n            goBack: invokeExtension('tabs.goBack'),\n            goForward: invokeExtension('tabs.goForward'),\n            onCreated: new ExtensionEvent('tabs.onCreated'),\n            onRemoved: new ExtensionEvent('tabs.onRemoved'),\n            onUpdated: new ExtensionEvent('tabs.onUpdated'),\n            onActivated: new ExtensionEvent('tabs.onActivated'),\n            onReplaced: new ExtensionEvent('tabs.onReplaced'),\n          }\n          return api\n        },\n      },\n\n      webNavigation: {\n        factory: (base) => {\n          return {\n            ...base,\n            getFrame: invokeExtension('webNavigation.getFrame'),\n            getAllFrames: invokeExtension('webNavigation.getAllFrames'),\n            onBeforeNavigate: new ExtensionEvent('webNavigation.onBeforeNavigate'),\n            onCommitted: new ExtensionEvent('webNavigation.onCommitted'),\n            onCompleted: new ExtensionEvent('webNavigation.onCompleted'),\n            onCreatedNavigationTarget: new ExtensionEvent(\n              'webNavigation.onCreatedNavigationTarget'\n            ),\n            onDOMContentLoaded: new ExtensionEvent('webNavigation.onDOMContentLoaded'),\n            onErrorOccurred: new ExtensionEvent('webNavigation.onErrorOccurred'),\n            onHistoryStateUpdated: new ExtensionEvent('webNavigation.onHistoryStateUpdated'),\n            onReferenceFragmentUpdated: new ExtensionEvent(\n              'webNavigation.onReferenceFragmentUpdated'\n            ),\n            onTabReplaced: new ExtensionEvent('webNavigation.onTabReplaced'),\n          }\n        },\n      },\n\n      webRequest: {\n        factory: (base) => {\n          return {\n            ...base,\n            onHeadersReceived: new ExtensionEvent('webRequest.onHeadersReceived'),\n          }\n        },\n      },\n\n      windows: {\n        factory: (base) => {\n          return {\n            ...base,\n            WINDOW_ID_NONE: -1,\n            WINDOW_ID_CURRENT: -2,\n            get: invokeExtension('windows.get'),\n            getLastFocused: invokeExtension('windows.getLastFocused'),\n            getAll: invokeExtension('windows.getAll'),\n            create: invokeExtension('windows.create'),\n            update: invokeExtension('windows.update'),\n            remove: invokeExtension('windows.remove'),\n            onCreated: new ExtensionEvent('windows.onCreated'),\n            onRemoved: new ExtensionEvent('windows.onRemoved'),\n            onFocusChanged: new ExtensionEvent('windows.onFocusChanged'),\n          }\n        },\n      },\n    }\n\n    // Initialize APIs\n    Object.keys(apiDefinitions).forEach((key: any) => {\n      const apiName: keyof typeof chrome = key\n      const baseApi = chrome[apiName] as any\n      const api = apiDefinitions[apiName]!\n\n      // Allow APIs to opt-out of being available in this context.\n      if (api.shouldInject && !api.shouldInject()) return\n\n      Object.defineProperty(chrome, apiName, {\n        value: api.factory(baseApi),\n        enumerable: true,\n        configurable: true,\n      })\n    })\n\n    // Remove access to internals\n    delete (window as any).electron\n\n    Object.freeze(chrome)\n\n    void 0 // no return\n  }\n\n  try {\n    // Expose extension IPC to main world\n    contextBridge.exposeInMainWorld('electron', electronContext)\n\n    // Mutate global 'chrome' object with additional APIs in the main world.\n    webFrame.executeJavaScript(`(${mainWorldScript}());`)\n  } catch {\n    // contextBridge threw an error which means we're in the main world so we\n    // can just execute our function.\n    mainWorldScript()\n  }\n}\n","module.exports = require(\"electron\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { injectExtensionAPIs } from './renderer'\n\n// Only load within extension page context\nif (location.href.startsWith('chrome-extension://')) {\n  injectExtensionAPIs()\n}\n"],"names":["ipcRenderer","formatIpcName","name","listenerMap","Map","addExtensionListener","extensionId","callback","listenerCount","get","send","set","addListener","event","args","process","env","NODE_ENV","console","log","removeExtensionListener","has","delete","removeListener","contextBridge","webFrame","injectExtensionAPIs","invokeExtension","fnName","options","length","pop","undefined","noop","warn","serialize","result","invoke","e","error","electronContext","mainWorldScript","electron","window","chrome","runtime","id","manifest","getManifest","opts","imageData2base64","imageData","canvas","document","createElement","ctx","getContext","width","height","putImageData","toDataURL","ExtensionEvent","constructor","getRules","ruleIdentifiers","Error","hasListener","removeRules","addRules","rules","hasListeners","ChromeSetting","clear","apiDefinitions","browserAction","shouldInject","action","browser_action","factory","base","api","setTitle","getTitle","setIcon","details","ImageData","Object","entries","reduce","obj","pair","setPopup","getPopup","setBadgeText","getBadgeText","setBadgeBackgroundColor","getBadgeBackgroundColor","enable","disable","onClicked","commands","getAll","onCommand","contextMenus","menuCounter","menuCallbacks","menuCreate","hasInternalListener","addInternalListener","info","tab","menuItemId","create","createProperties","onclick","update","remove","removeAll","cookies","getAllCookieStores","onChanged","extension","isAllowedIncognitoAccess","getViews","notifications","getPermissionLevel","onButtonClicked","onClosed","privacy","network","networkPredictionEnabled","webRTCIPHandlingPolicy","websites","hyperlinkAuditingEnabled","openOptionsPage","storage","local","managed","sync","tabs","executeScript","arg1","arg2","arg3","query","active","windowId","windows","WINDOW_ID_CURRENT","activeTab","getCurrent","getAllInWindow","insertCSS","reload","goBack","goForward","onCreated","onRemoved","onUpdated","onActivated","onReplaced","webNavigation","getFrame","getAllFrames","onBeforeNavigate","onCommitted","onCompleted","onCreatedNavigationTarget","onDOMContentLoaded","onErrorOccurred","onHistoryStateUpdated","onReferenceFragmentUpdated","onTabReplaced","webRequest","onHeadersReceived","WINDOW_ID_NONE","getLastFocused","onFocusChanged","keys","forEach","key","apiName","baseApi","defineProperty","value","enumerable","configurable","freeze","exposeInMainWorld","executeJavaScript","location","href","startsWith"],"sourceRoot":""}